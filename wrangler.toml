# Cloudflare Workers configuration
name = "playims"
compatibility_date = "2024-09-25"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = ".svelte-kit/cloudflare"

# --- Development (Default) ---
# Used by `pnpm dev`, `wrangler pages dev`, and `wrangler d1 ...` (no env flag)
[[d1_databases]]
binding = "DB"
database_name = "playims-central-db-dev"
database_id = "66dc8c86-b1da-4882-b259-f7847ecf5350"
migrations_dir = "src/lib/database/migrations"

# --- Production ---
# Temporary setup: production traffic points to the dev database while prod DB is outdated.
# Revert to playims-central-db-prod once production data/schema is brought up to date.
[env.production]
[[env.production.d1_databases]]
binding = "DB"
database_name = "playims-central-db-dev"
database_id = "66dc8c86-b1da-4882-b259-f7847ecf5350"
migrations_dir = "src/lib/database/migrations"
